{% extends 'creme_core/detailview.html' %}
{% load i18n creme_bricks creme_menu creme_perms creme_widgets %}

{% block body_classes %}{% if object.is_deleted %}is_deleted{% endif %}{% endblock %}

{% block global_buttons %}
    {{block.super}}

    {% block listview_button %}
      {% if object.get_lv_absolute_url %}
        <li>
            <a {% if user|has_perm_to_list:object.entity_type %}class="menu_button menu-button-icon" href="{{object.get_lv_absolute_url}}"
               {% else %}class="menu_button menu-button-icon forbidden is-disabled" title="{% translate 'You are not allowed to list' %}"{% endif %}>
                {% widget_icon name='listview' size='global-button' label=_('List-view') %} {% translate 'Back to the list' %}
            </a>
        </li>
      {% endif %}
    {% endblock %}

    {% block creation_button %}
      {% with url=object.get_create_absolute_url %}
       {% if url %}
        <li>
            <a {% if user|has_perm_to_create:object.entity_type %}class="menu_button menu-button-icon" href="{{url}}"
               {% else %}class="menu_button menu-button-icon forbidden is-disabled" title="{% translate 'You are not allowed to create' %}"{% endif %}>
                {% widget_icon name='add' size='global-button' label=_('Create') %} {{object.creation_label}}
            </a>
        </li>
       {% endif %}
      {% endwith %}
    {% endblock %}
{% endblock %}

{% block view_title %}
    {% brick_declare bricks.hat %}
    {% brick_declare bricks.buttons %}
    {% brick_declare bricks.top %}
    {% brick_declare bricks.left %}
    {% brick_declare bricks.right %}
    {% brick_declare bricks.bottom %}

    {% brick_display bricks.hat %}
{% endblock %}

{% block instance_buttons_container %}
    {% brick_display bricks.buttons %}
{% endblock %}

{% block detail_view_top %}
    {% brick_display bricks.top %}
{% endblock %}

{% block detail_view_left %}
    {% brick_display bricks.left %}
{% endblock %}

{% block detail_view_right %}
    {% brick_display bricks.right %}
{% endblock %}

{% block detail_view_bottom %}
    {% brick_display bricks.bottom %}
{% endblock %}
