{% load i18n creme_widgets %}{% load blockjsondata from creme_core_tags %}
{% if button.is_allowed %}
<a class="menu_button menu-button-icon" title="{{button.description}}" data-action="billing-hatmenubar-invoice-number" href="{% url 'billing__generate_invoice_number' object.id %}">
    {% widget_icon name='invoice' size='instance-button' label=_('Invoice number') %}
    {{button.verbose_name}}
    {% blockjsondata %}{
        "options": {
            "confirm": "{% translate 'Do you really want to generate an invoice number?' %}"
        }
    }{% endblockjsondata %}
</a>
{% else %}
<span class="menu_button menu-button-icon forbidden" title="{% translate 'You are not allowed to change this entity' %}">
    {% widget_icon name='invoice' size='instance-button' label=_('Invoice number') %}
    {{button.verbose_name}}
</span>
{% endif %}

{% comment %}
{% load i18n creme_widgets %}{% load blockjsondata from creme_core_tags %}
<a class="menu_button menu-button-icon{% if not has_perm %} forbidden is-disabled{% endif %}" title="{% if has_perm %}{{description}}{% else %}{% translate 'You are not allowed to change this entity' %}{% endif %}" data-action="billing-hatmenubar-invoice-number" href="{% url 'billing__generate_invoice_number' object.id %}">
    {% widget_icon name='invoice' size='instance-button' label=_('Invoice number') %}
    {% translate 'Generate the number of the Invoice' %}
    {% blockjsondata %}{
        "options": {
            "confirm": "{% translate 'Do you really want to generate an invoice number?' %}"
        }
    }{% endblockjsondata %}
</a>
{% endcomment %}